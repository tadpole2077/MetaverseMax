

<div class="histroyframe" cdkDrag style="display:inline-table;text-align:left;">

  <a class="closeframe" (click)="setHide()"><i class="far fa-window-close fa-2x" role="button"></i></a>
  <div class="targetPlot">X:<span>{{plot.x}}</span> Y:<span>{{plot.y}}</span></div>

  <div class="historySummary" [hidden]="!history">
    <div *ngIf="history">
      <span class="summaryLabel">Runs:</span><span class="summarydata"> {{ history.runCount }}</span>
    </div>

    <div *ngIf="history">
      <span class="summaryLabel">Total Produced:</span>
      <span class="summarydata">
        <span class="totalEle" *ngFor="let total of history.totalProduced">
          <span> {{total}}</span>
        </span>
      </span>
      <div>
        <span class="summaryLabel">First Run:</span><span class="summarydata"> {{ history.startProduction }}</span>
      </div>
    </div>

    <div class="table-container" [hidden]="!history">

      <table mat-table [dataSource]="dataSourceHistory" matSort class="table-striped mat-elevation-z8" style="display:inline-table">
        <!--table table-striped-->
        <ng-container matColumnDef="amount_produced">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Amount </th>
          <td mat-cell *matCellDef="let history"> {{ history.amount_produced }} </td>
        </ng-container>
        <ng-container matColumnDef="buildingProduct">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Product </th>
          <td mat-cell *matCellDef="let history"> {{ history.buildingProduct }}</td>
        </ng-container>
        <ng-container matColumnDef="efficiency_p">
          <th mat-header-cell *matHeaderCellDef mat-sort-header title="Production Efficiency - % of Max"> Eff(P) % </th>
          <td mat-cell *matCellDef="let history">
            <span style="color:red" [hidden]="!(history.efficiency_p<50)">{{ history.efficiency_p }}</span>
            <span style="color:darkorange" [hidden]="!(history.efficiency_p>=50 && history.efficiency_p<=80)">{{ history.efficiency_p }}</span>
            <span style="color:green" [hidden]="!(history.efficiency_p>80)">{{ history.efficiency_p }}</span>%
          </td>
        </ng-container>
        <ng-container matColumnDef="efficiency_m">
          <th mat-header-cell *matHeaderCellDef mat-sort-header title="Min/Max Efficiency %"> Eff(M) % </th>
          <td mat-cell *matCellDef="let history">
            <span style="color:red" [hidden]="!(history.efficiency_m<50)">{{ history.efficiency_m }}</span>
            <span style="color:darkorange" [hidden]="!(history.efficiency_m>=50 && history.efficiency_m<=80)">{{ history.efficiency_m }}</span>
            <span style="color:green" [hidden]="!(history.efficiency_m>80)">{{ history.efficiency_m }}</span>%
          </td>
        </ng-container>
        <ng-container matColumnDef="run_datetime">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
          <td mat-cell *matCellDef="let history"> {{ history.run_datetime }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <mat-paginator [hidden]="hidePaginator" [pageSize]="5" [hidePageSize] [showFirstLastButtons] class="paginatorContainer"></mat-paginator>

    </div>
  </div>
</div>
