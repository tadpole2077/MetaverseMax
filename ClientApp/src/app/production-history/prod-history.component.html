

<div class="histroyframe">

  <a class="closeframe" (click)="setHide()"><i class="far fa-window-close fa-2x" role="button"></i></a>
  <div class="historySummary" *ngIf="history">
    <div>
      <span class="summaryLabel">Runs:</span><span class="summarydata"> {{ history.runCount }}</span>
    </div>
    <div>
      <span class="summaryLabel">Total Produced:</span>
      <span class="summarydata">
        <span class="totalEle" *ngFor="let total of history.totalProduced">
          <span> {{total}}</span>
        </span>
      </span>
      <div>
        <span class="summaryLabel">First Run:</span><span class="summarydata"> {{ history.startProduction }}</span>
      </div>
    </div>
  </div>

  <div class="table-container" [hidden]="!history">

    <table mat-table [dataSource]="dataSourceHistory" matSort class="table-striped mat-elevation-z8" style="display:inline-table">
      <!--table table-striped-->
      <ng-container matColumnDef="amount_produced">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Amount </th>
        <td mat-cell *matCellDef="let history"> {{ history.amount_produced }} </td>
      </ng-container>
      <ng-container matColumnDef="buildingProduct">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Product </th>
        <td mat-cell *matCellDef="let history"> {{ history.buildingProduct }}</td>
      </ng-container>
      <ng-container matColumnDef="efficiency">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Eff % </th>
        <td mat-cell *matCellDef="let history">
          <span style="color:red" [hidden]="!(history.efficiency<50)">{{ history.efficiency }}</span>
          <span style="color:darkorange" [hidden]="!(history.efficiency>=50 && history.efficiency<=80)">{{ history.efficiency }}</span>
          <span style="color:green" [hidden]="!(history.efficiency>80)">{{ history.efficiency }}</span>%
        </td>
      </ng-container>
      <ng-container matColumnDef="run_datetime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
        <td mat-cell *matCellDef="let history"> {{ history.run_datetime }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [hidden]="hidePaginator" [pageSize]="5" [hidePageSize] [showFirstLastButtons] class="paginatorContainer"></mat-paginator>

  </div>

</div>
